<div class="po-page">

    <div class="page-header">
        <h2>Create Purchase Order</h2>
    </div>

    <form #purchaseOrderForm="ngForm" (ngSubmit)="PurchaseOrderSubmit(purchaseOrderForm)" novalidate class="po-form">

        <!-- Order Details -->
        <h3 class="section-title">Order Details</h3>

        <div class="form-grid">

            <div class="form-group">
                <input type="text" name="vendorId" ngModel required hidden/>

                <label>Vendor ID *</label>
                <select name="selectedVendor" ngModel (ngModelChange)="selectedVendorChange($event, purchaseOrderForm)">
                    <option *ngFor="let vendor of vendors_list" [ngValue]="vendor">{{vendor.row_id}}</option>
                </select>
            </div>

            <div class="form-group">
                <label>Vendor Name *</label>
                <input type="text" name="vendorName" ngModel required placeholder="Enter vendor Name" />
            </div>

            <div class="form-group">
                <label>Order Date</label>
                <input type="date" name="orderDate" ngModel />
            </div>

            <div class="form-group">
                <label>Expected Delivery</label>
                <input type="date" name="deliveryDate" ngModel />
            </div>

            <div class="form-group">
                <label>Status</label>
                <select name="status" ngModel>
                    <option value="Created">Created</option>
                    <option value="Approved">Approved</option>
                    <option value="Received">Received</option>
                    <option value="Closed">Closed</option>
                </select>
            </div>

        </div>

        <!-- Item Details -->
        <h3 class="section-title">Item Details</h3>

        <div class="form-grid">
            <input type="text" name="productId" ngModel hidden/>
            
            <div class="form-group">
                <label>Product ID</label>
                <select name="selectedProduct" ngModel (ngModelChange)="productIdChange($event, purchaseOrderForm)">
                    <option *ngFor="let product of products_list" [ngValue]="product">
                        {{ product.row_id }}
                    </option>
                </select>
            </div>

            <div class="form-group">
                <label>Product Name</label>
                <input type="text" name="productName" ngModel readonly />
            </div>


            <div class="form-group">
                <label>Quantity</label>
                <input type="number" name="quantity" ngModel min="1" (ngModelChange)="productQuantityChange($event, purchaseOrderForm)"/>
            </div>

            <div class="form-group">
                <label>Total Amount</label>
                <input type="number" name="totalAmount" ngModel min="0" readonly/>
            </div>

        </div>

        <!-- Actions -->
        <div class="form-actions">
            <button type="submit" class="btn-primary" [disabled]="purchaseOrderForm.invalid">
                Save Purchase Order
            </button>

            <a href="/purchaseorder/view" class="btn-secondary">
                Cancel
            </a>
        </div>

    </form>
</div>